<template>
  <div class="menu-mobile flex z-50 fixed p-4 top-0 w-full bg-white shadow-xl">
    <div class="flex-grow">
      <nuxt-link class="block" to="/" title="Go to startpage">
        <svg viewBox="0 0 153 64" width="102" height="42" xmlns="http://www.w3.org/2000/svg">
          <g fill="none" fill-rule="evenodd">
            <path fill="#FE272D" d="M0 0h63.182v63.182H0z"/>
            <path d="M6.442 22.842h7.998v23.35h7.354v-23.35h7.998V17.18H6.442v5.662zM57.59 37.153c0 4.938-4.054 9.039-11.279 9.039-6.652 0-11.851-3.138-12.071-9.08h8.018c.22 2.26 1.718 3.347 3.833 3.347 2.203 0 3.612-1.046 3.612-2.762 0-5.44-15.463-2.51-15.375-12.93 0-5.565 4.802-8.662 11.278-8.662 6.74 0 11.279 3.18 11.587 8.788h-8.15c-.133-1.883-1.542-3.013-3.569-3.055-1.806-.042-3.172.837-3.172 2.678 0 5.105 15.288 2.804 15.288 12.637z" fill="#FFF" fill-rule="nonzero"/>
            <g fill="#FE272D" fill-rule="nonzero">
              <path d="M74.084 22.26c0 3.591 2.441 6.104 5.902 6.104 2.792 0 4.898-1.59 5.567-4.189H82.41c-.485 1.026-1.37 1.54-2.458 1.54-1.755 0-2.959-1.334-2.959-3.454s1.204-3.454 2.96-3.454c1.086 0 1.972.513 2.457 1.539h3.143c-.669-2.6-2.775-4.207-5.567-4.207-3.46 0-5.902 2.531-5.902 6.122zm24.777-.017c0-3.607-2.658-6.138-6.002-6.138-3.327 0-6.035 2.53-6.035 6.138s2.708 6.156 6.035 6.156 6.002-2.548 6.002-6.156zm-9.112 0c0-2.137 1.204-3.488 3.11-3.488 1.872 0 3.093 1.351 3.093 3.488 0 2.103-1.22 3.488-3.093 3.488-1.906 0-3.11-1.385-3.11-3.488zm18.34-5.967v7.438l-4.78-7.438h-2.86V28.28h2.86v-7.403l4.78 7.403h2.86V16.276h-2.86zm4.932 12.003h2.86v-4.856h3.577V21.15h-3.578v-2.53h4.782v-2.343h-7.64V28.28zm15.716-1.436c0-.906-.686-1.607-1.689-1.607-1.02 0-1.705.7-1.705 1.607 0 .872.685 1.573 1.705 1.573 1.003 0 1.689-.701 1.689-1.573zm0-6.96c0-.905-.686-1.606-1.689-1.606-1.02 0-1.705.7-1.705 1.607 0 .872.685 1.573 1.705 1.573 1.003 0 1.689-.701 1.689-1.573zm12.455-3.607h-7.189V28.28h7.19v-2.342h-4.331v-2.634h3.829v-2.256h-3.829v-2.428h4.33v-2.343zm1.806 7.164v-7.164h2.859v7.181c0 1.42.685 2.24 2.04 2.24 1.353 0 2.072-.82 2.072-2.24v-7.18h2.86v7.163c0 3.317-2.275 4.959-4.983 4.959-2.725 0-4.848-1.642-4.848-4.959zM74.118 46.754h8.392v-2.376h-4.514l.422-.337c1.847-1.5 3.908-3.57 3.908-6.11 0-2.102-1.237-3.761-4.012-3.761-2.224 0-4.146 1.3-4.23 4.326h2.759c0-1.18.501-1.864 1.354-1.864.87 0 1.27.581 1.27 1.488 0 2.103-2.758 4.274-5.35 6.463v2.171zm9.646-6.24c0 3.693 1.22 6.36 4.698 6.36 3.478 0 4.698-2.667 4.698-6.36 0-3.66-1.22-6.327-4.698-6.327-3.477 0-4.698 2.667-4.698 6.326zm6.586-.205l.001.204c0 1.984-.2 3.625-1.889 3.625-1.688 0-1.89-1.641-1.89-3.625l.004-.406c.033-1.74.318-3.184 1.886-3.184 1.628 0 1.873 1.558 1.888 3.386zm4.214 6.445h8.393v-2.376h-4.514l.421-.337c1.848-1.5 3.91-3.57 3.91-6.11 0-2.102-1.238-3.761-4.013-3.761-2.224 0-4.147 1.3-4.23 4.326h2.758c0-1.18.502-1.864 1.355-1.864.869 0 1.27.581 1.27 1.488 0 2.103-2.758 4.274-5.35 6.463v2.171zm9.647-6.24c0 3.693 1.22 6.36 4.698 6.36 3.477 0 4.698-2.667 4.698-6.36 0-3.66-1.22-6.327-4.698-6.327-3.478 0-4.698 2.667-4.698 6.326zm6.587 0l-.009.624c-.051 1.692-.373 3-1.88 3-1.629 0-1.873-1.526-1.889-3.413v-.212c0-1.915.2-3.59 1.889-3.59 1.688 0 1.889 1.675 1.889 3.59z"/>
            </g>
          </g>
        </svg>
      </nuxt-link>
    </div>

    <a class="py-2 mr-5 px-3 bg-red text-white focus:bg-blue hover:bg-blue inline-block" :href="settings.tito_overview_link" target="_blank" rel="noopener noreferrer">Tickets!</a>

    <div>
      <button class="menu-icon px-4 py-2 block w-full" :class="{'active': isMainNavigationVisible }" @click="toggleMainNavigation()" title="Toogle Main Navigation">
        <svg class="m-auto" width="24px" height="19px" viewBox="0 0 24 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
          <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
            <polygon class="menu-icon-line-bottom" fill="#FE272D" fill-rule="nonzero" points="24 16 24 19 0 19 0 16"></polygon>
            <polygon class="menu-icon-line-middle" fill="#FE272D" fill-rule="nonzero" points="24 8 24 11 0 11 0 8"></polygon>
            <polygon class="menu-icon-line-top" fill="#FE272D" fill-rule="nonzero" points="24 0 24 3 0 3 0 0"></polygon>
          </g>
      </svg>
      </button>
    </div>
  </div>
</template>

<script>
export default {
  props: {
    settings: Object
  },
  computed: {
    isMainNavigationVisible() {
      return this.$store.state.interactions.isMainNavigationVisible
    }
  },
  methods: {
    toggleMainNavigation() {
      this.$store.commit('interactions/setMainNavigationVisibility', !this.isMainNavigationVisible)
      this.$nextTick(() => {
        if(this.isMainNavigationVisible) {
          document.querySelectorAll('#navigation a')[0].focus()
        }
      }, 0)
    }
  }
}
</script>